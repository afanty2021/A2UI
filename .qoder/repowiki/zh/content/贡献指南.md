# 贡献指南

<cite>
**本文档中引用的文件**  
- [CONTRIBUTING.md](file://CONTRIBUTING.md)
- [README.md](file://README.md)
- [mkdocs.yaml](file://mkdocs.yaml)
- [roadmap.md](file://docs/roadmap.md)
- [package.json](file://renderers/lit/package.json)
- [package.json](file://renderers/angular/package.json)
- [tsconfig.json](file://renderers/lit/tsconfig.json)
- [tsconfig.json](file://renderers/angular/tsconfig.json)
- [custom.css](file://docs/stylesheets/custom.css)
</cite>

## 目录
1. [项目架构与代码风格](#项目架构与代码风格)  
2. [如何为项目做贡献](#如何为项目做贡献)  
   2.1 [搭建本地开发环境](#搭建本地开发环境)  
   2.2 [运行测试](#运行测试)  
   2.3 [构建和预览文档](#构建和预览文档)  
   2.4 [提交代码流程](#提交代码流程)  
3. [鼓励贡献](#鼓励贡献)  
4. [未来发展方向](#未来发展方向)

## 项目架构与代码风格

A2UI 是一个开源项目，旨在通过声明式 JSON 格式让智能体（Agent）生成用户界面。其核心设计理念包括安全性优先、LLM 友好性、框架无关性和灵活性。项目采用模块化架构，包含多个渲染器（如 Lit、Angular）、客户端示例、工具和规范定义。

在代码风格方面，项目使用 TypeScript 和 Python 编写，前端部分主要基于 TypeScript，后端 Agent 示例使用 Python。项目遵循标准的 Web Components 规范，并支持多种前端框架集成。代码格式化方面，项目使用 Prettier 进行统一格式化，确保代码风格一致性。ESLint 用于静态代码分析，帮助发现潜在错误和不符合最佳实践的代码。

项目中的 TypeScript 配置（`tsconfig.json`）启用了严格模式（`"strict": true`），以提高类型安全性。同时，项目使用模块解析器 `bundler` 模式，支持 JSON 模块导入和隔离编译。这些配置确保了代码的高质量和可维护性。

**Section sources**  
- [renderers/lit/tsconfig.json](file://renderers/lit/tsconfig.json#L29)
- [renderers/angular/tsconfig.json](file://renderers/angular/tsconfig.json#L4)
- [renderers/lit/package.json](file://renderers/lit/package.json#L40)
- [renderers/angular/package.json](file://renderers/angular/package.json#L40)

## 如何为项目做贡献

### 搭建本地开发环境

要开始为 A2UI 项目做贡献，首先需要搭建本地开发环境。请确保已安装以下依赖：

- Node.js（用于 Web 客户端）
- Python（用于 Agent 示例）
- Gemini API Key（用于运行示例）

克隆仓库并进入项目目录：

```bash
git clone https://github.com/google/A2UI.git
cd A2UI
```

设置环境变量：

```bash
export GEMINI_API_KEY="your_gemini_api_key"
```

对于 Web 渲染器开发，进入 `renderers/lit` 或 `renderers/angular` 目录并安装依赖：

```bash
cd renderers/lit
npm install
```

**Section sources**  
- [README.md](file://README.md#L113-L139)
- [tools/editor/README.md](file://tools/editor/README.md#L12-L14)

### 运行测试

项目使用 Vitest 作为测试框架。要运行测试，请执行以下命令：

```bash
npm test
```

此命令会执行所有单元测试，确保代码更改不会破坏现有功能。测试脚本在 `package.json` 中定义，位于 `scripts.test` 字段。测试覆盖了核心功能，包括组件渲染、数据绑定和事件处理等。

**Section sources**  
- [renderers/lit/package.json](file://renderers/lit/package.json#L27)

### 构建和预览文档

项目文档使用 MkDocs 构建。要预览文档，请执行以下命令：

```bash
mkdocs serve
```

此命令会启动本地服务器，通常在 `http://127.0.0.1:8000` 上提供文档预览。文档源文件位于 `docs/` 目录下，使用 Markdown 编写，并通过 `mkdocs.yaml` 配置文件进行组织。

**Section sources**  
- [mkdocs.yaml](file://mkdocs.yaml#L15)

### 提交代码流程

贡献代码的流程如下：

1. **Fork 仓库**：在 GitHub 上 Fork 官方仓库。
2. **创建分支**：在你的 Fork 中创建新分支。
3. **提交更改**：在分支上进行代码修改并提交。
4. **推送分支**：将分支推送到你的 Fork。
5. **创建 Pull Request**：在 GitHub 上向主仓库提交 Pull Request。

所有提交都需要经过代码审查。我们使用 GitHub Pull Requests 进行审查。请确保你的代码符合项目风格，并通过所有测试。如果存在 linting 错误，请根据提示修复。

**Section sources**  
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L39-L43)

## 鼓励贡献

我们鼓励贡献者从简单的任务开始，例如修复文档中的错别字或添加新的使用示例。这些小的贡献有助于提高项目的可读性和实用性。对于有经验的开发者，可以尝试实现新功能、优化性能或开发新的渲染器。

请遵循 Google 的开源社区准则，并签署贡献者许可协议（CLA）。这确保了你的贡献可以被合法地整合到项目中。

## 未来发展方向

项目的未来发展方向在 `roadmap.md` 中详细列出。当前重点包括：

- **协议稳定化**：推动 v1.0 规范的发布。
- **更多渲染器**：增加对 React、Jetpack Compose、iOS (SwiftUI) 等平台的官方支持。
- **性能优化**：改进渲染器性能，支持大型组件树的懒加载和虚拟滚动。
- **无障碍功能**：提供一流的无障碍支持，包括 ARIA 属性生成和屏幕阅读器优化。

我们欢迎社区参与，共同塑造 A2UI 的未来。你可以通过 GitHub Discussions 提出功能建议，或直接提交 PR 实现所需功能。

**Section sources**  
- [roadmap.md](file://docs/roadmap.md#L132-L140)